<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript">

$(document).on('click', '#checkPwd', function() {
    const checkPassword = $('#password').val();
    if (!checkPassword || checkPassword.trim() === "") {
        alert("비밀번호를 입력하세요.");
    } else {
        $.ajax({
            type: 'POST', // 이 부분을 POST로 변경
            url: '/members/changePW', // 변경된 URL
            data: {'changePw': checkPassword}, // 변경된 데이터 이름
            dataType: "text"
        }).done(function(result){
            console.log(result);
            if (result === 'success') { // 서버에서 'success'를 반환하도록 설정
                console.log("비밀번호 일치");
                window.location.href = "/members/updateForm"; // 이동할 페이지
            } else {
                console.log("비밀번호 틀림");
                // 비밀번호가 일치하지 않으면
                alert("비밀번호가 맞지 않습니다.");
                window.location.reload(); // 페이지 다시 로드
            }
        }).fail(function(error){
            alert(JSON.stringify(error));
        })
    }
});

</script>
</head>
<h2>비밀번호 변경</h2>

<form action="/members/changePW" method="post">
    <div>
        <label for="newPassword">새 비밀번호:</label>
        <input type="password" id="newPassword" name="newPassword" required>
    </div>
    <!-- 여기에 다른 필드 추가 가능 -->
    <div>
        <button type="submit">비밀번호 변경</button>
    </div>
</form>

</body>
</html>